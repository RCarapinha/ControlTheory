function dotx=nonlinearsys(t,x)

    global M1 M2 M L L2 g f1 f2 f3 f4 f5 f6;
    
    dotx=zeros(6,1);

    dotx(1)=x(4);

    dotx(2)=x(5);

    dotx(3)=x(6);

    dotx(4)=-((-((L1*M1+L1*M2)*L2^2*M2*cos(x(2))-L1*L2*M2*L2*M2*cos(x(3))*cos(x(2)+x(3)))*(L2^2*M2*(-g*L2*M2*sin(x(2)+x(3))+L2*M2*x(4)*x(6)*sin(x(2)+x(3))-g*L1*(M1+M2)*sin(x(2))-L1*L2*M2*x(6)^2*sin(x(3)))-L1*L2*M2*cos(x(3))*(-g*L2*M2*sin(x(2)+x(3))-L2*M2*x(4)*x(5)*sin(x(2)+x(3))))+(L1^2*L2^2*M2*(M1+M2)-L1*L2*M2^2*cos(x(3))^2)*(-L2*M2*cos(x(2)+x(3))*(-g*L2*M2*sin(x(2)+x(3))-L2*M2*x(4)*x(5)*sin(x(2)+x(3)))*+L2^2*M2*(f1*x(1)-f2*x(2)+f3*x(3)+f4*x(4)+f5*x(5)+f6*x(6)+(-L1*M1-L1*M2)*x(5)^2*sin(x(2))-L2*M2*x(5)*x(6)*sin(x(2)+x(3))-L2*M2*x(6)^2*sin(x(2)+x(3)))))/(-((L1*M1+L1*M2)*L2^2*M2*cos(x(2))-L1*L2*M2*L2*M2*cos(x(3))*cos(x(2)+x(3)))^2+(L1^2*L2^2*M2*(M1+M2)-L1*L2*M2^2*cos(x(3))^2)*(L2^2*M2*(M+M1+M2)-L2*M2^2*cos(x(2)+x(3))^2)));

    dotx(5)=-((-f1*L1*M1*L2^2*M2*x(1)*cos(x(2))-f1*L1*M2*L2^2*M2*x(1)*cos(x(2))+f2*L1*M1*L2^2*M2*x(2)*cos(x(2))+f2*L1*M2*L2^2*M2*x(2)*cos(x(2))-f3*L1*M1*L2^2*M2*x(3)*cos(x(2))-f3*L1*M2*L2^2*M2*x(3)*cos(x(2))-f4*L1*M1*L2^2*M2*x(4)*cos(x(2))-f4*L1*M2*L2^2*M2*x(4)*cos(x(2))-f5*L1*M1*L2^2*M2*x(5)*cos(x(2))-f5*L1*M2*L2^2*M2*x(5)*cos(x(2))-f6*L1*M1*L2^2*M2*x(6)*cos(x(2))-f6*L1*M2*L2^2*M2*x(6)*cos(x(2))+f1*L1*L2*M2*L2*M2*x(1)*cos(x(3))*cos(x(2)+x(3))-f2*L1*L2*M2*L2*M2*x(2)*cos(x(3))*cos(x(2)+x(3))+f3*L1*L2*M2*L2*M2*x(3)*cos(x(3))*cos(x(2)+x(3))+f4*L1*L2*M2*L2*M2*x(4)*cos(x(3))*cos(x(2)+x(3))+f5*L1*L2*M2*L2*M2*x(5)*cos(x(3))*cos(x(2)+x(3))+f6*L1*L2*M2*L2*M2*x(6)*cos(x(3))*cos(x(2)+x(3))-L2^2*M*M2*g*L2*M2*sin(x(2)+x(3))-L2^2*M1*M2*g*L2*M2*sin(x(2)+x(3))-L2^2*M2^2*g*L2*M2*sin(x(2)+x(3))+L1*L2*M2*M*cos(x(3))*g*L2*M2*sin(x(2)+x(3))+L1*L2*M2*M1*cos(x(3))*g*L2*M2*sin(x(2)+x(3))+L1*L2*M2*M2*cos(x(3))*g*L2*M2*sin(x(2)+x(3))-L1*M1*L2*M2*cos(x(2))*cos(x(2)+x(3))*g*L2*M2*sin(x(2)+x(3))-L1*M2*L2*M2*cos(x(2))*cos(x(2)+x(3))*g*L2*M2*sin(x(2)+x(3))+L2*M2^2*cos(x(2)+x(3))^2*g*L2*M2*sin(x(2)+x(3))+L2^2*M*M2*L2*M2*x(4)*x(6)*sin(x(2)+x(3))+L2^2*M1*M2*L2*M2*x(4)*x(6)*sin(x(2)+x(3))+L2^2*M2^2*L2*M2*x(4)*x(6)*sin(x(2)+x(3))-L2*M2^2*cos(x(2)+x(3))^2*L2*M2*x(4)*x(6)*sin(x(2)+x(3))-g*L1*L2^2*M*M1*M2*sin(x(2))-g*L1*L2^2*M1^2*M2*sin(x(2))-g*L1*L2^2*M*M2^2*sin(x(2))-2*g*L1*L2^2*M1*M2^2*sin(x(2))-g*L1*L2^2*M2^3*sin(x(2))+L1*M1^2*L2^2*M2*x(5)^2*cos(x(2))*sin(x(2))+ 2*L1*M1*L1*M2*L2^2*M2*x(5)^2*cos(x(2))*sin(x(2))+ L1*M2^2*L2^2*M2*x(5)^2*cos(x(2))*sin(x(2))-L1*L2*M2*L1*M1*L2*M2*x(5)^2*cos(x(3))*cos(x(2)+x(3))*sin(x(2))-L1*L2*M2*L1*M2*L2*M2*x(5)^2*cos(x(3))*cos(x(2)+x(3))*sin(x(2))+g*L1*L2*M2^2*M1*cos(x(2)+x(3))^2*sin(x(2))+g*L1*L2*M2^2*M2*cos(x(2)+x(3))^2*sin(x(2))-L1*L2*M2*L2^2*M*M2*x(6)^2*sin(x(3))-L1*L2*M2*L2^2*M1*M2*x(6)^2*sin(x(3))-L1*L2*M2*L2^2*M2^2*x(6)^2*sin(x(3))+L1*L2*M2*L2*M2^2*x(6)^2*cos(x(2)+x(3))^2*sin(x(3))+L1*M1*L2^2*L2*M2*M2*x(5)*x(6)*cos(x(2))*sin(x(2)+x(3))+L1*M2*L2^2*L2*M2*M2*x(5)*x(6)*cos(x(2))*sin(x(2)+x(3))+L1*M1*L2^2*L2*M2*M2*x(6)^2*cos(x(2))*sin(x(2)+x(3))+L1*M2*L2^2*L2*M2*M2*x(6)^2*cos(x(2))*sin(x(2)+x(3))+L1*L2*M2*L2*M2*M*x(4)*x(5)*cos(x(3))*sin(x(2)+x(3))+L1*L2*M2*L2*M2*M1*x(4)*x(5)*cos(x(3))*sin(x(2)+x(3))+L1*L2*M2*L2*M2*M2*x(4)*x(5)*cos(x(3))*sin(x(2)+x(3))-L1*M1*L2*M2^2*x(4)*x(5)*cos(x(2))*cos(x(2)+x(3))*sin(x(2)+x(3))-L1*M2*L2*M2^2*x(4)*x(5)*cos(x(2))*cos(x(2)+x(3))*sin(x(2)+x(3))-L1*L2*M2*L2*M2^2*x(5)*x(6)*cos(x(3))*cos(x(2)+x(3))*sin(x(2)+x(3))-L1*L2*M2*L2*M2^2*x(6)^2*cos(x(3))*cos(x(2)+x(3))*sin(x(2)+x(3)))/(L1^2*L2^2*M*M1*M2+L1^2*L2^2*M1^2*M2+L1^2*L2^2*M*M2^2+2*L1^2*L2^2*M1*M2^2+L1^2*L2^2*M2^3-L1*M1^2*L2^2*M2*cos(x(2))^2-2*L1*M1*L1*M2*L2^2*M2*cos(x(2))^2-L1*M2^2*L2^2*M2*cos(x(2))^2-L1*L2*M2^2*M*cos(x(3))^2-L1*L2*M2^2*M1*cos(x(3))^2-L1*L2*M2^2*M2*cos(x(3))^2+2*L1*L2*M2*L1*M1*L2*M2*cos(x(2))*cos(x(3))*cos(x(2)+x(3))+2*L1*L2*M2*L1*M2*L2*M2*cos(x(2))*cos(x(3))*cos(x(2)+x(3))-L1^2*L2*M2^2*M1*cos(x(2)+x(3))^2-L1^2*L2*M2^2*M2*cos(x(2)+x(3))^2));

    dotx(6)=-((f1*L1*L2*M2*L1*M1*x(1)*cos(x(2))*cos(x(3))+f1*L1*L2*M2*L1*M2*x(1)*cos(x(2))*cos(x(3))-f2*L1*L2*M2*L1*M1*x(2)*cos(x(2))*cos(x(3))-f2*L1*L2+M2*L1*M2*x(2)*cos(x(2))*cos(x(3))+f3*L1*L2*M2*L1*M1*x(3)*cos(x(2))*cos(x(3))+f3*L1*L2*M2*L1*M2*x(3)*cos(x(2))*cos(x(3))+f4*L1*L2*M2*L1*M1*x(4)*cos(x(2))*cos(x(3))+f4*L1*L2*M2*L1*M2*x(4)*cos(x(2))*cos(x(3))+f5*L1*L2*M2*L1*M1*x(5)*cos(x(2))*cos(x(3))+f5*L1*L2*M2*L1*M2*x(5)*cos(x(2))*cos(x(3))+f6*L1*L2*M2*L1*M1*x(6)*cos(x(2))*cos(x(3))+f6*L1*L2*M2*L1*M2*x(6)*cos(x(2))*cos(x(3))-f1*L1^2*L2*M2*M1*x(1)*cos(x(2)+x(3))-f1*L1^2*L2*M2*M2*x(1)*cos(x(2)+x(3))+ f2*L1^2*L2*M2*M1*x(2)*cos(x(2)+x(3))+ f2*L1^2*L2*M2*M2*x(2)*cos(x(2)+x(3))- f3*L1^2*L2*M2*M1*x(3)*cos(x(2)+x(3))- f3*L1^2*L2*M2*M2*x(3)*cos(x(2)+x(3))- f4*L1^2*L2*M2*M1*x(4)*cos(x(2)+x(3))- f4*L1^2*L2*M2*M2*x(4)*cos(x(2)+x(3))- f5*L1^2*L2*M2*M1*x(5)*cos(x(2)+x(3))- f5*L1^2*L2*M2*M2*x(5)*cos(x(2)+x(3))- f6*L1^2*L2*M2*M1*x(6)*cos(x(2)+x(3))- f6*L1^2*L2*M2*M2*x(6)*cos(x(2)+x(3))- L1^2*M*M1*g*L2*M2*sin(x(2)+x(3))-L1^2*M1^2*g*L2*M2*sin(x(2)+x(3))- L1^2*M*M2*g*L2*M2*sin(x(2)+x(3))-2*L1^2*M1*M2*g*L2*M2*sin(x(2)+x(3))-L1^2*M2^2*g*L2*M2*sin(x(2)+x(3))+ L1*M1^2*cos(x(2))^2*g*L2*M2*sin(x(2)+x(3))+ 2*L1*M1*L1*M2*cos(x(2))^2*g*L2*M2*sin(x(2)+x(3))+ L1*M2^2*cos(x(2))^2*g*L2*M2*sin(x(2)+x(3))+ L1*L2*M2*M*cos(x(3))*g*L2*M2*sin(x(2)+x(3))+ L1*L2*M2*M1*cos(x(3))*g*L2*M2*sin(x(2)+x(3))+ L1*L2*M2*M2*cos(x(3))*g*L2*M2*sin(x(2)+x(3))- L1*M1*L2*M2*cos(x(2))*cos(x(2)+x(3))*g*L2*M2*sin(x(2)+x(3))- L1*M2*L2*M2*cos(x(2))*cos(x(2)+x(3))*g*L2*M2*sin(x(2)+x(3))- L1*L2*M2*M*cos(x(3))*L2*M2*x(4)*x(6)*sin(x(2)+x(3))- L1*L2*M2*M1*cos(x(3))*L2*M2*x(4)*x(6)*sin(x(2)+x(3))- L1*L2*M2*M2*cos(x(3))*L2*M2*x(4)*x(6)*sin(x(2)+x(3))+ L1*M1*L2*M2*cos(x(2))*cos(x(2)+x(3))*L2*M2*x(4)*x(6)*sin(x(2)+x(3))+ L1*M2*L2*M2*cos(x(2))*cos(x(2)+x(3))*L2*M2*x(4)*x(6)*sin(x(2)+x(3))+ g*L1*L1*L2*M2*M*M1*cos(x(3))*sin(x(2))+ g*L1*L1*L2*M2*M1^2*cos(x(3))*sin(x(2))+ g*L1*L1*L2*M2*M*M2*cos(x(3))*sin(x(2))+ 2*g*L1*L1*L2*M2*M1*M2*cos(x(3))*sin(x(2))+ g*L1*L1*L2*M2*M2^2*cos(x(3))*sin(x(2))- L1*L2*M2*L1*M1^2*x(5)^2*cos(x(2))*cos(x(3))*sin(x(2))- 2*L1*L2*M2*L1*M1*L1*M2*x(5)^2*cos(x(2))*cos(x(3))*sin(x(2))- L1*L2*M2*L1*M2^2*x(5)^2*cos(x(2))*cos(x(3))*sin(x(2))+ L1^2*L1*M1*L2*M2*M1*x(5)^2*cos(x(2)+x(3))*sin(x(2))+ L1^2*L1*M2*L2*M2*M1*x(5)^2*cos(x(2)+x(3))*sin(x(2))+ L1^2*L1*M1*L2*M2*M2*x(5)^2*cos(x(2)+x(3))*sin(x(2))+ L1^2*L1*M2*L2*M2*M2*x(5)^2*cos(x(2)+x(3))*sin(x(2))- g*L1*L1*M1*L2*M2*M1*cos(x(2))*cos(x(2)+x(3))*sin(x(2))- g*L1*L1*M2*L2*M2*M1*cos(x(2))*cos(x(2)+x(3))*sin(x(2))- g*L1*L1*M1*L2*M2*M2*cos(x(2))*cos(x(2)+x(3))*sin(x(2))- g*L1*L1*M2*L2*M2*M2*cos(x(2))*cos(x(2)+x(3))*sin(x(2))+ L1*L2*M2^2*M*x(6)^2*cos(x(3))*sin(x(3))+ L1*L2*M2^2*M1*x(6)^2*cos(x(3))*sin(x(3))+ L1*L2*M2^2*M2*x(6)^2*cos(x(3))*sin(x(3))- L1*L2*M2*L1*M1*L2*M2*x(6)^2*cos(x(2))*cos(x(2)+x(3))*sin(x(3))- L1*L2*M2*L1*M2*L2*M2*x(6)^2*cos(x(2))*cos(x(2)+x(3))*sin(x(3))- L1^2*L2*M2*M*M1*x(4)*x(5)*sin(x(2)+x(3))- L1^2*L2*M2*M1^2*x(4)*x(5)*sin(x(2)+x(3))- L1^2*L2*M2*M*M2*x(4)*x(5)*sin(x(2)+x(3))- 2*L1^2*L2*M2*M1*M2*x(4)*x(5)*sin(x(2)+x(3))- L1^2*L2*M2*M2^2*x(4)*x(5)*sin(x(2)+x(3))+ L1*M1^2*L2*M2*x(4)*x(5)*cos(x(2))^2*sin(x(2)+x(3))+ 2*L1*M1*L1*M2*L2*M2*x(4)*x(5)*cos(x(2))^2*sin(x(2)+x(3))+ L1*M2^2*L2*M2*x(4)*x(5)*cos(x(2))^2*sin(x(2)+x(3))- L1*L2*M2*L1*M1*L2*M2*x(5)*x(6)*cos(x(2))*cos(x(3))*sin(x(2)+x(3))- L1*L2*M2*L1*M2*L2*M2*x(5)*x(6)*cos(x(2))*cos(x(3))*sin(x(2)+x(3))- L1*L2*M2*L1*M1*L2*M2*x(6)^2*cos(x(2))*cos(x(3))*sin(x(2)+x(3))- L1*L2*M2*L1*M2*L2*M2*x(6)^2*cos(x(2))*cos(x(3))*sin(x(2)+x(3))+ L1^2*L2*M2^2*M1*x(5)*x(6)*cos(x(2)+x(3))*sin(x(2)+x(3))+ L1^2*L2*M2^2*M2*x(5)*x(6)*cos(x(2)+x(3))*sin(x(2)+x(3))+ L1^2*L2*M2^2*M1*x(6)^2*cos(x(2)+x(3))*sin(x(2)+x(3))+ L1^2*L2*M2^2*M2*x(6)^2*cos(x(2)+x(3))*sin(x(2)+x(3)))/(L1^2*L2^2*M*M1*M2+L1^2*L2^2*M1^2*M2+ L1^2*L2^2*M*M2^2+2*L1^2*L2^2*M1*M2^2+L1^2*L2^2*M2^3- L1*M1^2*L2^2*M2*cos(x(2))^2-2*L1*M1*L1*M2*L2^2*M2*cos(x(2))^2- L1*M2^2*L2^2*M2*cos(x(2))^2-L1*L2*M2^2*M*cos(x(3))^2- L1*L2*M2^2*M1*cos(x(3))^2-L1*L2*M2^2*M2*cos(x(3))^2+ 2*L1*L2*M2*L1*M1*L2*M2*cos(x(2))*cos(x(3))*cos(x(2)+x(3))+ 2*L1*L2*M2*L1*M2*L2*M2*cos(x(2))*cos(x(3))*cos(x(2)+x(3))- L1^2*L2*M2^2*M1*cos(x(2)+x(3))^2- L1^2*L2*M2^2*M2*cos(x(2)+x(3))^2));

end